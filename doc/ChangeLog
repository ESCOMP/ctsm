===============================================================
Tag name:  ctsm5.1.dev???
Originator(s):  slevis (Samuel Levis,303-665-1310)
Date:  ???
One-line Summary: Integrate ocgis tool in mkmapdata.sh

Purpose of changes
------------------

 Modify mkmapdata.sh to run with @bekozi's ocgis tool because it allows
 for:
 - chunking of the data while regridding to reduce memory requirements
 - subsetting of the source files when regridding to regional
   destination files


Bugs fixed or introduced
------------------------

Issues fixed (include CTSM Issue #): #643 #648 #806 others?
CIME Issues fixed (include issue #): [If none, remove this line]

Known bugs introduced in this tag (include github issue ID): [If none, remove this line]

Known bugs found since the previous tag (include github issue ID): [If none, remove this line]


Significant changes to scientifically-supported configurations
--------------------------------------------------------------

Does this tag change answers significantly for any of the following physics configurations?
(Details of any changes will be given in the "Answer changes" section below.)

    [Put an [X] in the box for any configuration with significant answer changes.]

[ ] clm5_0

[ ] ctsm5_0-nwp

[ ] clm4_5

Notes of particular relevance for users
---------------------------------------

Caveats for users (e.g., need to interpolate initial conditions):
 None once #645 is resolved.

Changes to CTSM's user interface (e.g., new/renamed XML or namelist variables):
 None.

Changes made to namelist defaults (e.g., changed parameter values):
 Changes needed to accommodate UNSTRUCT grid source files.

Changes to the datasets (e.g., parameter, surface or initial files):
 Switch from using SCRIP to UNSTRUCT grid source files when running
 mkmapdata.sh

Substantial timing or memory changes:
 More efficient and faster mkmapdata.sh:

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------
NOTE: Be sure to review the steps in README.CHECKLIST.master_tags as well as the coding style in the Developers Guide

Caveats for developers (e.g., code that is duplicated that requires double maintenance):

Changes to tests or testing:

Code reviewed by:
 @ekluzek @billsacks @negin513 @bekozi

CTSM testing:

[... Remove before making master tag.  Available test levels:

    a) regular (must be run before handing off a tag to SEs and must be run
     before committing a tag)
    b) build_namelist (if namelists and/or build_system changed))
    c) tools (only if tools are modified and no CTSM source is modified)
    d) short (for use during development and in rare cases where only a small
          change with known behavior is added ... eg. a minor bug fix)
    e) doc (no source testing required)

... ]

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    cheyenne - 

  tools-tests (test/tools):

    cheyenne - 

  PTCLM testing (tools/shared/PTCLM/test):

    cheyenne - 

  python testing (see instructions in python/README.md; document testing done):

    (any machine) - 

  regular tests (aux_clm):

    cheyenne ---- 
    izumi ------- 

If the tag used for baseline comparisons was NOT the previous tag, note that here:


Answer changes
--------------

Changes answers relative to baseline:

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: ALL
    - what platforms/compilers: ALL
    - nature of change: roundoff; larger than roundoff/same climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?


Detailed list of changes
------------------------

List any externals directories updated (cime, rtm, mosart, cism, fates, etc.):

Pull Requests that document the changes (include PR ids):
 https://github.com/ESCOMP/CTSM/pull/815

===============================================================
===============================================================
Tag name:  ctsm5.1.dev002
Originator(s):  slevis (Samuel Levis,303-665-1310)
Date:  Mon Sep 25 09:39:19 MDT 2020
One-line Summary: Reduce duplication between caps

Purpose of changes
------------------

 Eliminate duplication of the "derived quantities for required fields"
 and corresponding error checking codes that repeat across the mct,
 nuopc, and lilac caps. This consolidates the code and reduces
 maintenance requirements.


Bugs fixed or introduced
------------------------

Issues fixed (include CTSM Issue #): #918


Significant changes to scientifically-supported configurations
--------------------------------------------------------------

Does this tag change answers significantly for any of the following physics configurations?
(Details of any changes will be given in the "Answer changes" section below.)

    [Put an [X] in the box for any configuration with significant answer changes.]

[X] clm5_0

[X] ctsm5_0-nwp

[X] clm4_5

Notes of particular relevance for users
---------------------------------------

Caveats for users (e.g., need to interpolate initial conditions): None

Changes to CTSM's user interface (e.g., new/renamed XML or namelist variables): None

Changes made to namelist defaults (e.g., changed parameter values): None

Changes to the datasets (e.g., parameter, surface or initial files): None

Substantial timing or memory changes: [For timing changes, can check PFS test(s) in the test suite] None

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------
NOTE: Be sure to review the steps in README.CHECKLIST.master_tags as well as the coding style in the Developers Guide

Caveats for developers (e.g., code that is duplicated that requires double maintenance): None

Changes to tests or testing: None

Code reviewed by: @billsacks @slevisconsulting


CTSM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    cheyenne - 

  tools-tests (test/tools):

    cheyenne - 

  PTCLM testing (tools/shared/PTCLM/test):

    cheyenne - 

  python testing (see instructions in python/README.md; document testing done):

    (any machine) - 

  regular tests (aux_clm):

    cheyenne ---- OK
    izumi ------- PASS

If the tag used for baseline comparisons was NOT the previous tag, note that here:


Answer changes
--------------

Changes answers relative to baseline: Yes (Similar climate)

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: Larger than roundoff/same climate


Detailed list of changes
------------------------

 Changes were implemented in three steps:

 1) Bit-for-bit: @billsacks simplified subroutine QSat by making three
 arguments optional (es, qsdT, esdT).

 2) Answer-changing: @slevisconsulting replaced local calculations of
 qsat in /src/cpl/mct, /src/cpl/lilac, and /src/cpl/nuopc with calls to
 CTSM's subroutine QSat. Subroutine QSat uses a higher-order polynomial
 approximation to estimate qsat, which explains the larger than
 round-off diffs. When moving the three identical local approximations
 to QSat as a temporary test instead of using the higher-order
 polynomial approximation, the diffs reduce to round-off.

 3) Bit-for-bit: @slevisconsulting consolidated repeating codes in
 /src/cpl/mct, /src/cpl/lilac, and /src/cpl/nuopc by placing in the new
 file /src/utils/lnd_import_export_utils.F90.

List any externals directories updated (cime, rtm, mosart, cism, fates, etc.):

Pull Requests that document the changes (include PR ids):
 https://github.com/ESCOMP/CTSM/pull/1086
 https://github.com/ESCOMP/CTSM/pull/1094
===============================================================
===============================================================
Tag name:  ctsm5.1.dev001
Originator(s):  erik (Erik Kluzek,UCAR/TSS,303-497-1326)
Date: Wed Sep 23 02:29:08 MDT 2020
One-line Summary: Start the clm5_1 physics series, with some changes to the fire model from Fang Li

Purpose of changes
------------------

Fang Li's latest Fire version - includes allowing clm5.1 phys version. New physics option is added
called "clm5_1", with currently the new feature to use the latest fire changes. This has some
adjustments to the fire model and includes some changes to the parameter file. Other new features
will be added into clm5_1 in future tags.

Also bring in mksurfdata changes for the raw urban dataset change. This adds some changes to
mksurfdata for a new urban raw dataset, as well as preparation for new changes for some other
urban changes that will be a future part of clm5_1. Also use the half degree lightning dataset
by default for clm5_1.

Start adding a new test list ctsm_sci that tests all the scientifically supported compsets.
Some of those tests fail due to existing issues, that will be fixed later.

Some more work done to change clm to ctsm, and allow for ctsm as a component.

Bugs fixed or introduced
------------------------

Issues fixed (include CTSM Issue #): 
  Fix #1142 -- Add ctsm_sci test list
  Fix #1145 -- File was corrupted on glade
  Fix #1144 -- Move btran2 to just inside of fire model
  Fix #889 --- Some adjustments to the Li Fire model

Significant changes to scientifically-supported configurations
--------------------------------------------------------------

Does this tag change answers significantly for any of the following physics configurations?
(Details of any changes will be given in the "Answer changes" section below.)

    [Put an [X] in the box for any configuration with significant answer changes.]

[ ] clm5_0

[ ] ctsm5_0-nwp

[ ] clm4_5

Notes of particular relevance for users
---------------------------------------

Caveats for users (e.g., need to interpolate initial conditions): None

Changes to CTSM's user interface (e.g., new/renamed XML or namelist variables): Adds clm5_1 option to CLM_PHYSICS_VERSION
  clm5_1_GSWP3v1 is the only LND_TUNING_MDOE option for clm5_1
  New compsets added for CLM51 I2000Clm51BgcCropGs, I2000Clm51BgcGs, I1850Clm51BgcGs, IHistClm51BgcGs, IHistClm51BgcCropGs
     

Changes made to namelist defaults (e.g., changed parameter values): clm5_1 physics options added in
    Add the ability to set the component name in filenames (default is still clm2, but can be clm4, olr clm5)
     By default lightning dataset for clm5_1 is the half degree file

Changes to the datasets (e.g., parameter, surface or initial files): All params files updated with new fields for fire

Substantial timing or memory changes: None

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------
NOTE: Be sure to review the steps in README.CHECKLIST.master_tags as well as the coding style in the Developers Guide

Caveats for developers (e.g., code that is duplicated that requires double maintenance):

Changes to tests or testing: Add ctsm_sci test list and move some clm5_0 to clm5_1 and one one clm5_1 specific test

Code reviewed by: self


CTSM testing: regular, tools

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    cheyenne - PASS (853 tests are different)

  tools-tests (test/tools):

    cheyenne - PASS

  python testing (see instructions in python/README.md; document testing done):

    cheyenne -- PASS

  regular tests (aux_clm):

    cheyenne ---- OK
    izumi ------- PASS

If the tag used for baseline comparisons was NOT the previous tag, note that here:


Answer changes
--------------

Changes answers relative to baseline: No (although clm5_1 is a new physics option that is different)

Detailed list of changes
------------------------

List any externals directories updated (cime, rtm, mosart, cism, fates, etc.): None

Pull Requests that document the changes (include PR ids):
(https://github.com/ESCOMP/ctsm/pull)
  #1151 -- Move btran2 to inside CNFireBase
  #1150 -- ctsm5.1 starting point
  #1157 -- Urban mksurfdata_map changes
  #1149 -- LILACSMOKE test change
  #1146 -- Add --project to LILACS create_newcase

===============================================================
===============================================================
